<%namespace file="form.html" import="text"/>
<%namespace file="form.html" import="dropdown"/>
<%namespace file="form.html" import="browse"/>

<%inherit file="base.html"/>

<%block name="header">
${parent.header()}
</%block>

<%block name="title">
    % if page.newService:
        Create New Service
    % else:
        Edit Service
    % endif
</%block>

<%block>

<form id="service-form" class="form-service" method="post" action="${url_for('modify')}" role="form">

    <!-- GENERAL -->
    <div class="panel panel-primary col-sm-6">
        <div class="panel-heading"> General </div>
        <div class="panel-body">
            <input type="hidden" name="originalServiceID" id="originalServiceID" value='${page.serviceID}' />
            ${text('serviceID', input_width=12, label=_('Service ID'))}
            ${text('serviceVersion', input_width=12, label=_('Service Version'))}
            ${text('serviceDescription', input_width=12, label=_('Description'))}
            ${text('serviceTags', input_width=12, label=_('Tags'))}
            ${text('servicePort', input_width=12, label=_('Port'))}
        </div>
    </div>

    <!-- APP -->
    <div class="panel panel-primary col-sm-6">
        <div class="panel-heading"> Cloudlet Ready App </div>
        <div class="panel-body">
            ${text('appName', input_width=12, label=_('Name'))}
            ${text('appDescription', input_width=12, label=_('Description'))}
            ${text('appVersion', input_width=12, label=_('Version'))}
            ${text('appPackage', input_width=12, label=_('Package'))}
            ${text('appFilename', input_width=12, label=_('Filename'))}
        </div>
    </div>

    <!-- STORAGE -->
    <div class="panel panel-primary col-sm-6">
        <div class="panel-heading"> Stored Service VM </div>
        <div class="panel-body">
            ${text('vmStoredFolder', input_width=12, label=_('Stored VM Folder'))}
            ${text('vmDiskImageFile', input_width=12, label=_('Disk Image File'), disabled=True)}
            ${text('vmStateImageFile', input_width=12, label=_('State Image File'), disabled=True)}
            
		    % if page.newService:
        	    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-new-servicevm">Create Service VM</button>
      	    % else:
          	    <button type="button" class="btn btn-primary" onclick="openEditVNC('${page.openSVMURL}')">Modify Service VM</button>
            % endif
        </div>
    </div>

    <!-- REQUIREMENT -->
    <div class="panel panel-primary col-sm-6">
        <div class="panel-heading"> Requirement </div>
        <div class="panel-body">
            ${text('reqMinMem', input_width=12, label=_('Min Memory (MB)'))}
            ${text('reqIdealMem', input_width=12, label=_('Ideal Memory (MB)'))}
        </div>
    </div>

    <div class="panel panel-primary col-sm-12">
        <div class="panel-body">
            <div class="form-group col-sm-12">
                <button type="reset"  class="btn btn-default btn-primary col-sm-offset-1 col-sm-4" name="cancelButton" id="cancelButton">Cancel</button>
                <button type="submit" class="btn btn-default btn-primary col-sm-offset-2 col-sm-4" name="submitButton" id="submitButton">Submit</button>
            </div>
        </div>
    </div>

</form>

<!-- Create New Service VM modal. -->
<div class="modal fade" id="modal-new-servicevm" role="dialog" data-backdrop="static">
	<div class="modal-dialog">
		<div class="modal-content">
		    <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal">x</button>
		        <h3>Create New Service VM</h3>
		    </div>
		    <div class="modal-body">
		        <div class="well">
		            <form id="new-svm-form" class="form-horizontal" action="${page.createSVMURL}" method="post">
		            	${browse(id='sourceDiskImage', input_width=12, label=_('Source Disk Image'))}
		                ${dropdown(id='osType', options={'Linux':'Linux','Windows':'Windows'}, input_width=12, label=_('OS Type'))}
		            </form>
		        </div>
		    </div>
		    <div class="modal-footer">
		        <a href="#" class="btn" data-dismiss="modal">Cancel</a>
		        <a href="#" class="btn btn-primary new-svm-action" onclick="openCreateVNC()">Create</a>
		    </div>
	    </div>
    </div>
</div>

<script src="/manager/js/modify.js"></script>

</%block>
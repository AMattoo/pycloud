#!/bin/bash

do_exit_error() {
    exit 1
}

error() {
    local msg="$1"
    [ -z "$msg" ] && msg="Error.  Aborting."
    echo ""
    echo "${txtred}ERROR: $msg${txtrst}" 1>&2

    trap do_exit_error EXIT
    print_help
    type -t print_help && print_help 1>&2
    exit 1
}

print_help() {
    echo ""
    echo "USAGE: $0 hostname ca ca_key organization country state locality"
    echo
    echo "This script will generate server or client certificates based on a hostname"
    echo "in the given organization"
    echo ""
    exit 0
}
